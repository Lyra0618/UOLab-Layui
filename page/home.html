<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>首页二</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="../lib/layui-v2.6.3/css/layui.css" media="all">
  <link rel="stylesheet" href="../lib/font-awesome-4.7.0/css/font-awesome.min.css" media="all">
  <link rel="stylesheet" href="../css/public.css" media="all">
  <style>
    .layui-card {border:1px solid #f2f2f2;border-radius:5px;}
    .layuimini-qiuck-module {text-align:center;margin-top: 10px}
    .layuimini-qiuck-module a i {display:inline-block;width:100%;height:60px;line-height:60px;text-align:center;border-radius:2px;font-size:30px;background-color:#F8F8F8;color:#333;transition:all .3s;-webkit-transition:all .3s;}
    .layuimini-qiuck-module a cite {position:relative;top:2px;display:block;color:#666;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:14px;}
    .welcome-module {width:100%;height:210px;}
    .main_btn > p {height:40px;}
  </style>
</head>
<body>
<div class="layuimini-container">
  <!-- 主容器，包含主要内容 -->
  <div class="layuimini-main">
    <!-- 行，设置间距 -->
    <div class="layui-row layui-col-space15">
      <!-- 设置列宽为12，即占满一行 -->
      <div class="layui-col-md12">
        <!-- 卡片主体 -->
        <div class="layui-card-body">
          <!-- 卡片，设置阴影和圆角 -->
          <div class="layui-card" style="box-shadow: 0px 0px 10px 3px gainsboro; border-radius: 20px;">
            <!-- 卡片头部，设置字体样式 -->
            <div class="layui-card-header" style="font-weight: bold; font-size: 18px;">
              <i class="layui-icon layui-icon-note"></i> 快捷方式
            </div>
            <!-- 卡片内容主体 -->
            <div class="layui-card-body">
              <!-- 欢迎模块容器 -->
              <div class="welcome-module">
                <!-- 行，设置间距 -->
                <div class="layui-row layui-col-space10 layuimini-qiuck">
                  <!-- 快捷方式模块 -->
                  <div class="layui-col-md3 layuimini-qiuck-module">
                    <a href="javascript:;" layuimini-content-href="page/user/findUser.html" data-title="查询用户" data-icon="fa fa-window-maximize">
                      <i class="fa fa-window-maximize"></i>
                      <cite>查询用户</cite>
                    </a>
                  </div>
                  <!-- 每个快捷方式的定义 -->
                  <div class="layui-col-md3 layuimini-qiuck-module">
                    <a href="javascript:;" layuimini-content-href="page/dept/findDept.html" data-title="查询院系" data-icon="fa fa-gears">
                      <i class="fa fa-gears"></i>
                      <cite>查询院系</cite>
                    </a>
                  </div>
                  <div class="layui-col-md3 layuimini-qiuck-module">
                    <a href="javascript:;" layuimini-content-href="page/dept/findMajor.html" data-title="查询专业" data-icon="fa fa-file-text">
                      <i class="fa fa-file-text"></i>
                      <cite>查询专业</cite>
                    </a>
                  </div>
                  <div class="layui-col-md3 layuimini-qiuck-module">
                    <a href="javascript:;" layuimini-content-href="page/staff/findStaff.html" data-title="查询成员" data-icon="fa fa-dot-circle-o">
                      <i class="fa fa-dot-circle-o"></i>
                      <cite>查询成员</cite>
                    </a>
                  </div>
                  <div class="layui-col-md3 layuimini-qiuck-module">
                    <a href="javascript:;" layuimini-content-href="page/competition/findCompetition.html" data-title="查询参赛信息" data-icon="fa fa-calendar">
                      <i class="fa fa-calendar"></i>
                      <cite>查询参赛信息</cite>
                    </a>
                  </div>
                  <div class="layui-col-md3 layuimini-qiuck-module">
                    <a href="javascript:;" layuimini-content-href="page/credit/findCredit.html" data-title="查询学分" data-icon="fa fa-hourglass-end">
                      <i class="fa fa-hourglass-end"></i>
                      <cite>查询学分</cite>
                    </a>
                  </div>
                  <div class="layui-col-md3 layuimini-qiuck-module">
                    <a href="javascript:;" layuimini-content-href="page/course/findCourse.html" data-title="查询公开课" data-icon="fa fa-snowflake-o">
                      <i class="fa fa-snowflake-o"></i>
                      <cite>查询公开课</cite>
                    </a>
                  </div>
                  <div class="layui-col-md3 layuimini-qiuck-module">
                    <a href="javascript:;" layuimini-content-href="page/credit/countCredit.html" data-title="学分统计" data-icon="fa fa-search">
                      <i class="fa fa-search"></i>
                      <cite>学分统计</cite>
                    </a>
                  </div>
                  <!-- 快捷方式模块结束 -->
                </div>
              </div>
            </div>
            <!-- 卡片内容主体结束 -->
          </div>
          <!-- 卡片结束 -->
        </div>
        <!-- 卡片主体结束 -->
      </div>
      <!-- 列结束 -->
    </div>
    <!-- 行结束 -->
  </div>
  <!-- 主容器结束 -->

  <!-- 图表部分 -->
  <div class="layui-row">
    <div class="layui-col-md12">
      <div class="layui-card-body">
        <!-- 图表一和图表二容器 -->
        <div class="layui-row layui-col-space15">
          <div class="layui-col-md6">
            <div class="layui-card" style="box-shadow: 0px 0px 10px 3px gainsboro; border-radius: 20px;">
              <div class="layui-card-header" style="font-weight: bold; font-size: 18px;">
                <i class="fa fa-pie-chart"></i>&nbsp;&nbsp; 各竞赛奖项类别统计
              </div>
              <div class="layui-card-body">
                <div id="echarts-dataset" style="background-color:#ffffff;min-height:300px;padding: 10px"></div>
              </div>
            </div>
          </div>
          <div class="layui-col-md6">
            <div class="layui-card" style="border-radius: 20px; border: 2px solid buttonface; box-shadow: 0px 0px 10px 3px gainsboro;">
              <div class="layui-card-header" style="font-weight: bold; font-size: 18px;">
                <i class="fa fa-pie-chart"></i> 一些国家历年的获奖数
              </div>
              <div class="layui-card-body">
                <div id="echarts-map" style="background-color:#ffffff;min-height:300px;padding: 10px"></div>
              </div>
            </div>
          </div>
          <!-- 图表二结束 -->
        </div>
        <!-- 图表一和图表二容器结束 -->
      </div>
    </div>
  </div>
  <!-- 图表部分结束 -->

  <!-- 图表三 -->
  <div class="padding:20px;">
    <div class="layui-row layui-col-space15">
      <div class="layui-col-md12">
        <div class="layui-card-body">
          <div class="layui-card" style="box-shadow: 0px 0px 10px 3px gainsboro; border-radius: 20px;">
            <div class="layui-card-header" style="font-weight: bold; font-size: 18px;">
              <i class="fa fa-line-chart"></i> 登入用户动态显示
            </div>
            <div class="layui-card-body">
              <div id="main3" style="width: 100%; height: 600px;"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- 图表三结束 -->


</div>
</div>
<script src="../lib/layui-v2.6.3/layui.js" charset="utf-8"></script>
<script src="../js/lay-config.js?v=1.0.4" charset="utf-8"></script>
<script src="../js/echarts.js"></script>
<script>
  layui.use(['layer', 'miniTab'], function () {
    var $ = layui.jquery,
            layer = layui.layer,
            miniTab = layui.miniTab;

    // 监听Tab操作
    miniTab.listen();

    /**
     * 柱状图
     */
    var echartsDataset = echarts.init(document.getElementById('echarts-dataset'), 'walden');

    // 配置柱状图的选项
    var optionDataset = {
      legend: {}, // 显示图例
      tooltip: {}, // 显示提示框
      dataset: {
        "dimensions": ["product", "一等奖", "二等奖", "三等奖", "优秀奖"], // 维度
        "source": [
          {"product": "编程竞赛", "一等奖": 1, "二等奖": 1, "三等奖": 0, "优秀奖": 1},
          {"product": "数学竞赛", "一等奖": 1, "二等奖": 0, "三等奖": 1, "优秀奖": 0},
          {"product": "物理竞赛", "一等奖": 0, "二等奖": 1, "三等奖": 0, "优秀奖": 0},
          {"product": "化学竞赛", "一等奖": 1, "二等奖": 0, "三等奖": 1, "优秀奖": 0}
        ] // 数据源
      },
      xAxis: {type: 'category'}, // X轴
      yAxis: {}, // Y轴
      series: [
        {type: 'bar'}, // 声明多个bar系列
        {type: 'bar'},
        {type: 'bar'},
        {type: 'bar'}
      ]
    };

    // 渲染柱状图
    echartsDataset.setOption(optionDataset);

    /**
     * 中国地图
     */
    var ROOT_PATH = '../api/life-expectancy-table.json'; // 数据路径

    var chartDom2 = document.getElementById('echarts-map');
    var myChart2 = echarts.init(chartDom2);
    var option2;

    // 获取数据并运行
    $.get(
            ROOT_PATH,
            function (_rawData) {
              run(_rawData);
            }
    );

    // 配置地图选项
    function run(_rawData) {
      const countries = [
        'Finland',
        'France',
        'Germany',
        'Iceland',
        'Norway',
        'Poland',
        'Russia',
        'United Kingdom'
      ];
      const datasetWithFilters = [];
      const seriesList = [];
      echarts.util.each(countries, function (country) {
        var datasetId = 'dataset_' + country;
        datasetWithFilters.push({
          id: datasetId,
          fromDatasetId: 'dataset_raw',
          transform: {
            type: 'filter',
            config: {
              and: [
                { dimension: 'Year', gte: 1966 },
                { dimension: 'Country', '=': country }
              ]
            }
          }
        });
        seriesList.push({
          type: 'line',
          datasetId: datasetId,
          showSymbol: false,
          name: country,
          endLabel: {
            show: true,
            formatter: function (params) {
              return params.value[3] + ': ' + params.value[0];
            }
          },
          labelLayout: {
            moveOverlap: 'shiftY'
          },
          emphasis: {
            focus: 'series'
          },
          encode: {
            x: 'Year',
            y: 'number',
            label: ['Country', 'number'],
            itemName: 'Year',
            tooltip: ['number']
          }
        });
      });
      option2 = {
        animationDuration: 10000,
        dataset: [
          {
            id: 'dataset_raw',
            source: _rawData
          },
          ...datasetWithFilters
        ],
        title: {
          text: 'The number of awards since 1966'
        },
        tooltip: {
          order: 'valueDesc',
          trigger: 'axis'
        },
        xAxis: {
          type: 'category',
          nameLocation: 'middle'
        },
        yAxis: {
          name: 'number'
        },
        grid: {
          right: 140
        },
        series: seriesList
      };
      myChart2.setOption(option2);
    }

    option2 && myChart2.setOption(option2);

    var app = {};

    var chartDom = document.getElementById('main3');
    var myChart = echarts.init(chartDom);
    var option;

    // 动态数据生成
    const categories = (function () {
      let now = new Date();
      let res = [];
      let len = 10;
      while (len--) {
        res.unshift(now.toLocaleTimeString().replace(/^\D*/, ''));
        now = new Date(+now - 2000);
      }
      return res;
    })();
    const categories2 = (function () {
      let res = [];
      let len = 10;
      while (len--) {
        res.push(10 - len - 1);
      }
      return res;
    })();
    const data = (function () {
      let res = [];
      let len = 10;
      while (len--) {
        res.push(Math.round(Math.random() * 1000));
      }
      return res;
    })();
    const data2 = (function () {
      let res = [];
      let len = 0;
      while (len < 10) {
        res.push(+(Math.random() * 10 + 5).toFixed(1));
        len++;
      }
      return res;
    })();
    option = {
      title: {
        text: 'Dynamic Data'
      },
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          type: 'cross',
          label: {
            backgroundColor: '#283b56'
          }
        }
      },
      legend: {},
      toolbox: {
        show: true,
        feature: {
          dataView: { readOnly: false },
          restore: {},
          saveAsImage: {}
        }
      },
      dataZoom: {
        show: false,
        start: 0,
        end: 100
      },
      xAxis: [
        {
          type: 'category',
          boundaryGap: true,
          data: categories
        },
        {
          type: 'category',
          boundaryGap: true,
          data: categories2
        }
      ],
      yAxis: [
        {
          type: 'value',
          scale: true,
          name: 'count',
          max: 30,
          min: 0,
          boundaryGap: [0.2, 0.2]
        },
        {
          type: 'value',
          scale: true,
          name: 'Order',
          max: 800,
          min: 0,
          boundaryGap: [0.2, 0.2]
        }
      ],
      series: [
        {
          name: 'Dynamic Bar',
          type: 'bar',
          xAxisIndex: 1,
          yAxisIndex: 1,
          data: data
        },
        {
          name: 'Dynamic Line',
          type: 'line',
          data: data2
        }
      ]
    };
    app.count = 11;
    setInterval(function () {
      let axisData = new Date().toLocaleTimeString().replace(/^\D*/, '');
      data.shift();
      data.push(Math.round(Math.random() * 600));
      data2.shift();
      data2.push(+(Math.random() * 10 + 5).toFixed(1));
      categories.shift();
      categories.push(axisData);
      categories2.shift();
      categories2.push(app.count++);
      myChart.setOption({
        xAxis: [
          {
            data: categories
          },
          {
            data: categories2
          }
        ],
        series: [
          {
            data: data
          },
          {
            data: data2
          }
        ]
      });
    }, 2100);

    option && myChart.setOption(option);

    // echarts 窗口缩放自适应
    window.onresize = function () {
      echartsDataset.resize();
      myChart2.resize();
      myChart.resize();
    }

  });

</script>
</body>
</html>
